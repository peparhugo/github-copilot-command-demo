# Copilot Inventory & Action Plan

This document was generated by an automated review of the repository's Copilot assets and proposes a prioritized plan to "super-charge" the Copilot experience in this repo.

Paths inspected
- `.github/prompts/` — user-facing prompt files (many `.prompt.md` files).
- `.github/agents/` — agent blueprints (many `.agent.md` files).
- `.github/instructions/` — repository instruction files (dozens of `.instructions.md`).
- `.github/skills/` — skill collections and curated helpers (`anthropics/`, `awesome-copilot/`, etc.).

High-level findings
- The repository contains a very large and diverse set of agents, prompts and instructions covering many domains (DevOps, Power Platform, language-specific patterns, accessibility, security, etc.).
- Most assets follow consistent naming patterns and appear ready to be discovered by Copilot Chat and by humans.
- There is an opportunity to improve discoverability, governance, and CI validation for prompt/agent metadata (front matter), to add owner mappings, and to provide a small set of smoke tests for critical prompts.

Quick wins (low-effort, high-impact)
1. Add `prompts/README.md` and `agents/README.md` that list the highest-value prompts and agents (how to run them, a few examples).
2. Add front matter to any prompts missing it. Required minimum: `description`, `version`, `author`, `tags`.
3. Add a `prompts/_index.md` (or `prompts/README.md`) summarizing categories and recommended prompts for common tasks (review, refactor, tests, infra).
4. Add a GitHub Actions workflow that runs a lightweight validation on PRs: `markdownlint`, `front-matter` presence, and link-check.
5. Create a `CODEOWNERS` (or OWNERS) file for `.github/prompts/`, `.github/agents/`, `.github/instructions/` to assign ownership and reviewers.

Medium-effort items
- Add smoke tests for 5–10 highest-value prompts. Smoke tests should run the prompt locally (or run a structure validation) and check the output shape (JSON schema or simple checks).
- Create a `scripts/validate-prompts.js` script (or Python) to verify front matter, required keys, and example output format.
- Add a `prompts/curation.md` describing how to nominate high-value prompts and the curation process.

Higher-effort / optional
- Add automated generation of a `prompts.catalog.json` with metadata used by internal dashboards.
- Integrate richer security reviews for agent prompts that can modify code (automatic static checks, risk scoring).
- Add sample smoke harness that spawns a headless Copilot/agent emulator for deterministic validation (requires infra).

Recommended GitHub Actions snippet (PR validations)

```yaml
name: Validate Copilot Assets
on: [pull_request]
jobs:
  docs-lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Node
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      - name: Install dev deps
        run: |
          npm ci || true
      - name: Run markdownlint
        run: |
          npx markdownlint "**/*.md"
      - name: Validate prompt front matter
        run: |
          node .github/tools/validate-frontmatter.js .github/prompts || true
      - name: Run link check
        run: |
          npx markdown-link-check "README.md" -q || true
```

Suggested `validate-frontmatter.js` (concept)

- Place under `.github/tools/validate-frontmatter.js` and wire into the workflow.
- It should:
  - Recursively read `.github/prompts/*.prompt.md` and `.github/agents/*.agent.md` files
  - Parse YAML front matter
  - Ensure required keys: `description`, `version`, `author`, `tags`
  - Exit non-zero if missing keys are found (or print warnings depending on policy)

Small example (Node) — implement when convenient:

```javascript
// .github/tools/validate-frontmatter.js
const fs = require('fs');
const path = require('path');
const fm = require('front-matter');

function findFiles(dir, ext) {
  return fs.readdirSync(dir).filter(f => f.endsWith(ext)).map(f => path.join(dir, f));
}

const prompts = findFiles('.github/prompts','prompt.md');
let bad = [];
for (const p of prompts) {
  const raw = fs.readFileSync(p,'utf8');
  const parsed = fm(raw);
  const body = parsed.attributes || {};
  const required = ['description','version','author','tags'];
  const missing = required.filter(k => !(k in body));
  if (missing.length) bad.push({file:p, missing});
}
if (bad.length) {
  console.error('Missing front matter in prompts:', JSON.stringify(bad, null, 2));
  process.exit(2);
}
console.log('Front matter validation passed');
```

(You may prefer Python for the script — either is fine.)

Prioritised implementation plan

- [ ] Create `prompts/README.md` and `agents/README.md` with examples and recommended prompts (quick win)
- [ ] Add `CODEOWNERS` for `.github/*` directories (quick win)
- [ ] Add `docs/copilot-inventory.md` (this file) and check it into the repo (done)
- [ ] Implement `.github/tools/validate-frontmatter.js` and add the GitHub Actions workflow (medium effort)
- [ ] Pick 3–5 high-value prompts to add smoke tests and front-matter (medium effort)
- [ ] Create `prompts/_index.md` for curated prompts and run the first curation (medium effort)

Suggested governance: PR checklist for prompts/agents
- Update `CHANGELOG.md` entry referencing the prompt/agent change
- Include example input and example output in the prompt file (for smoke-tests)
- Add a reviewer from `CODEOWNERS`
- Add `security_review_required: true` front matter if the prompt/agent can modify code

Notes on accessibility & security
- Many instruction files already exist under `.github/instructions` (a11y, security-and-owasp, etc.) — link to them from prompt front matter where applicable (e.g., `applyInstructions: ["a11y","security-and-owasp"]`).
- For agents that run code changes, require an explicit `safety` or `risk` metadata field in the front matter and require a human gate in PRs.

Next steps for me (I can implement these for you):
- [ ] Create `prompts/README.md` and `agents/README.md` skeletons (I can add examples)
- [ ] Add `.github/tools/validate-frontmatter.js` with a minimal implementation and wire up a GitHub Actions workflow in `.github/workflows/validate-copilot-assets.yml`
- [ ] Add `CODEOWNERS` entries for `.github/prompts` and `.github/agents`

If you want I will proceed to implement the top 3 items now (create `prompts/README.md`, `agents/README.md`, `.github/tools/validate-frontmatter.js` and a `validate` workflow). Tell me to proceed and I will run the changes and validate them.

---

*Generated on 2026-02-05 — automated inventory pass.*
